---
apiVersion: "v1"
kind: "Namespace"
metadata:
  name: "alloy-system"
---
apiVersion: "source.toolkit.fluxcd.io/v1"
kind: "HelmRepository"
metadata:
  name: "grafana"
  namespace: "flux-system"
spec:
  interval: "24h"
  url: "https://grafana.github.io/helm-charts"
---
apiVersion: "helm.toolkit.fluxcd.io/v2"
kind: "HelmRelease"
metadata:
  name: "alloy"
  namespace: "flux-system"
spec:
  chart:
    spec:
      chart: "alloy"
      sourceRef:
        kind: "HelmRepository"
        name: "grafana"
        namespace: "flux-system"
      version: "^1.6.0"
  interval: "10m"
  releaseName: "alloy"
  targetNamespace: "alloy-system"
  values:
    alloy:
      configMap:
        create: false
        name: "alloy-config"
        key: "config.alloy"
      stabilityLevel: "experimental"
      enableReporting: false
    configReloader:
      enabled: false
